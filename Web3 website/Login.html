<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
    <link rel="stylesheet" href="style1.css">
</head>
<body>
    <img src="blockchain1.png" alt="Blockchain" style="width:1700px;">
    <form>
        <h2>Login</h2>
        <div class="form-group">
        <label for="fname">User:</label><br>
        <input type="text" placeholder="Username or Email" id="User">
        <label for="fname">Password:</label><br>        
        <input type="text" placeholder="Password" id="Password">
        
        <input type=button onClick="location.href='complaint_Form.html'" value="Submit">
        
    </form>
 

    <script src="https://cdn.jsdelivr.net/npm/web3@1.2.8/dist/web3.js"></script>

    <script>    
    
    var account;
    window.addEventListener('load', async () => {
        console.log("In Event Listener");
    
        if (typeof window.ethereum !== 'undefined') { 
            console.log("MetaMask is Available :) !"); 
            }
            
        // Modern DApp browsers
        if (window.ethereum) {
            window.web3 = new Web3(ethereum);
                        
            // To Capture the account details from MetaMask
            const accounts = await ethereum.enable();
            account = accounts[0];
                
            }
            console.log(account);           
        abi = [ 
        
    {
        "inputs": [
            {
                "internalType": "string",
                "name": "_Email",
                "type": "string"
            },
            {
                "internalType": "string",
                "name": "_Password",
                "type": "string"
            }
        ],
        "name": "submit",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "stateMutability": "nonpayable",
        "type": "constructor"
    }

        ];

        contractaddress = '0xd8b934580fcE35a11B58C6D73aDeE468a2833fa8';

var myContract = new Web3.eth.Contract(abi,contractaddress, {from: account, gasPrice: '4000000000', gas: '8000000'});
                            
var result = myContract.methods.store(hari).send(function (err, result) {
                
        console.log("Result: ", result);
            if (result) { console.log(result); }                    
        });         

var result = myContract.methods.retrieve().call(function (err, result) {
                
        console.log("Result: ", result);
            if (result) { console.log(result[0]); }                 
        });         

        });

        
        
    </script>   
</body>
</html>